<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>画线</title>

    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        #canvas{
            display: block;
        }
    </style>
</head>
<body>
<canvas id="canvas" width="150" height="150"></canvas>
<script>
    let  canvas = document.getElementById("canvas");
    //获取当前窗口可视宽度/可视高度
    canvas.width = document.documentElement.clientWidth;
    canvas.height = document.documentElement.clientHeight;

    let ctx = canvas.getContext("2d");
    // alert("请体验开始画线条!");
    //初始化开关 生活中的列子 红绿灯
    let painting = false;
    let lastPoint = {
        x: undefined, y: undefined};

    ctx.fillStyle = "black";
    // 设置图形轮廓的颜色
    ctx.strokeStyle = "none";

    canvas.onmousedown = (e) =>{
        // 当鼠标按下打开开关   绘画开关
        painting = true;
        lastPoint = {x:e.clientX, y:e.clientY}
        console.log(lastPoint);
    }


    canvas.onmousemove = (e) =>{

        if (painting === true){
            // ctx.beginPath();
            // ctx.arc(e.clientX,e.clientY,10,0,2*Math.PI);
            // ctx.stroke();
            // ctx.fill();
            let x = e.clientX;
            let y = e.clientY;
            let newPoint = {
                "x": x, "y": y};
            drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);
            lastPoint = newPoint;
        }else{
            console.log("什么都不干");
        }
    }

    canvas.onmouseup = ()=>{
        painting = false;

    }

    // 划线函数
    function drawLine(x1, y1, x2, y2) {
        ctx.beginPath();
        ctx.lineWidth = 3;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);

        ctx.stroke();
        ctx.fill();
        ctx.closePath();

    }

</script>
</body>
</html>